<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>Roblox Community</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;700;900&family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
:root {
  --bg: #0a0a0a; --glass: linear-gradient(135deg, rgba(255,255,255,0.055) 0%, rgba(255,255,255,0.015) 100%);
  --glass-border: rgba(255,255,255,0.08); --glass-border-h: rgba(255,255,255,0.14);
  --text: #e5e5e5; --text-mid: rgba(229,229,229,0.55); --text-dim: rgba(229,229,229,0.3);
  --r: 20px; --r-sm: 12px;
  --tg-safe-top: env(safe-area-inset-top, 0px);
  --tg-safe-bottom: env(safe-area-inset-bottom, 0px);
}
html { height: 100%; overflow: hidden; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Manrope', sans-serif;
  font-size: 15px;
  line-height: 1.5;
  height: 100%;
  overflow: hidden;
  -webkit-font-smoothing: antialiased;
  padding-top: var(--tg-safe-top);
  padding-bottom: var(--tg-safe-bottom);
}
#app {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  padding-top: var(--tg-safe-top);
  padding-bottom: var(--tg-safe-bottom);
}
body::before { content: ''; position: fixed; inset: 0; pointer-events: none; z-index: 0; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)'/%3E%3C/svg%3E"); opacity: 0.032; }
.orb { position: fixed; border-radius: 50%; pointer-events: none; z-index: 0; filter: blur(90px); opacity: 0.13; }
.orb-1 { width: 380px; height: 380px; background: radial-gradient(circle, rgba(255,255,255,0.22) 0%, transparent 70%); top: -80px; left: -60px; animation: f1 22s ease-in-out infinite; }
.orb-2 { width: 460px; height: 460px; background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%); bottom: -120px; right: -80px; animation: f2 28s ease-in-out infinite; }
.orb-3 { width: 280px; height: 280px; background: radial-gradient(circle, rgba(255,255,255,0.18) 0%, transparent 70%); top: 45%; left: 35%; animation: f3 18s ease-in-out infinite; }
@keyframes f1 { 0%,100%{transform:translate(0,0) scale(1)} 40%{transform:translate(40px,-60px) scale(1.08)} 70%{transform:translate(-20px,35px) scale(0.93)} }
@keyframes f2 { 0%,100%{transform:translate(0,0) scale(1)} 35%{transform:translate(-55px,30px) scale(1.12)} 70%{transform:translate(30px,-45px) scale(0.96)} }
@keyframes f3 { 0%,100%{transform:translate(0,0) scale(1)} 50%{transform:translate(50px,55px) scale(1.06)} }
#pc { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
.overlay { position: fixed; inset: 0; z-index: 900; background: rgba(0,0,0,0.65); backdrop-filter: blur(4px); display: none; }
.sidebar { position: fixed; top: 0; left: -290px; width: 270px; height: 100%; z-index: 999; background: rgba(10,10,10,0.92); backdrop-filter: blur(30px) saturate(150%); border-right: 1px solid var(--glass-border); padding: 28px 18px 24px; padding-top: calc(28px + var(--tg-safe-top)); display: flex; flex-direction: column; gap: 3px; transition: left .28s cubic-bezier(.4,0,.2,1); }
.sidebar.open { left: 0; }
.sb-brand { font-family: 'Unbounded', sans-serif; font-size: 10px; font-weight: 700; letter-spacing: .28em; text-transform: uppercase; color: rgba(255,255,255,0.9); margin-bottom: 24px; padding-bottom: 18px; border-bottom: 1px solid var(--glass-border); }
.sb-item { padding: 12px 14px; border-radius: 14px; font-size: 13px; font-weight: 500; color: var(--text-mid); cursor: pointer; transition: background .14s, color .14s; }
.sb-item:active { background: rgba(255,255,255,0.05); color: var(--text); }
.sb-ver { margin-top: auto; font-size: 10px; color: var(--text-dim); font-family: monospace; letter-spacing: .06em; }
.header { flex-shrink: 0; height: 54px; display: flex; align-items: center; gap: 12px; padding: 0 16px; background: rgba(10,10,10,0.88); border-bottom: 1px solid var(--glass-border); backdrop-filter: blur(20px); z-index: 100; }
.burger { display: flex; flex-direction: column; gap: 5px; cursor: pointer; flex-shrink: 0; padding: 4px; }
.burger span { display: block; height: 1.5px; border-radius: 2px; background: var(--text-mid); transition: .2s; }
.burger span:nth-child(1){width:18px} .burger span:nth-child(2){width:13px} .burger span:nth-child(3){width:16px}
.h-name { font-family: 'Unbounded', sans-serif; font-size: 10px; font-weight: 700; letter-spacing: .22em; text-transform: uppercase; color: rgba(255,255,255,0.85); flex: 1; }
.h-badge { font-size: 9px; font-weight: 700; letter-spacing: .1em; text-transform: uppercase; color: rgba(255,255,255,0.4); border: 1px solid var(--glass-border); padding: 3px 10px; border-radius: 20px; }
.nav { flex-shrink: 0; display: flex; padding: 0 16px; border-bottom: 1px solid var(--glass-border); background: rgba(10,10,10,0.6); overflow-x: auto; scrollbar-width: none; z-index: 2; }
.nav::-webkit-scrollbar { display: none; }
.nav-item { flex-shrink: 0; padding: 14px 0; margin-right: 22px; font-size: 11px; font-weight: 700; letter-spacing: .05em; color: var(--text-dim); cursor: pointer; white-space: nowrap; border-bottom: 1.5px solid transparent; transition: color .18s, border-color .18s; }
.nav-item.active { color: var(--text); border-color: rgba(255,255,255,0.6); }
.scroll-area { flex: 1; overflow-y: auto; overflow-x: hidden; -webkit-overflow-scrolling: touch; position: relative; z-index: 2; overscroll-behavior: contain; }
.content { padding: 0 16px 40px; }
.page { display: none; }
.page.active { display: block; animation: fadeup .25s ease; }
@keyframes fadeup { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
.pg-head { padding: 28px 0 20px; border-bottom: 1px solid var(--glass-border); margin-bottom: 24px; }
.pg-eyebrow { font-size: 9px; font-weight: 700; text-transform: uppercase; letter-spacing: .24em; color: var(--text-dim); display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.pg-eyebrow::before { content: ''; display: block; width: 16px; height: 1px; background: rgba(255,255,255,0.2); }
.pg-title { font-family: 'Unbounded', sans-serif; font-size: 26px; font-weight: 700; letter-spacing: -.025em; background: linear-gradient(135deg, #ffffff 0%, #a3a3a3 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; line-height: 1.15; }
.pg-sub { margin-top: 6px; font-size: 12px; color: var(--text-dim); font-weight: 400; }
.field { margin-bottom: 22px; }
.f-label { display: block; font-size: 9px; font-weight: 700; text-transform: uppercase; letter-spacing: .2em; color: var(--text-dim); margin-bottom: 10px; }
input[type=text], input[type=url], input[type=number], textarea, select { width: 100%; background: linear-gradient(135deg, rgba(255,255,255,0.04) 0%, rgba(255,255,255,0.01) 100%); backdrop-filter: blur(16px); border: 1px solid var(--glass-border); border-radius: var(--r-sm); padding: 13px 15px; color: var(--text); font-family: 'Manrope', sans-serif; font-size: 14px; font-weight: 400; outline: none; appearance: none; -webkit-appearance: none; transition: border-color .18s, box-shadow .18s; }
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button { opacity: 1; }
input::placeholder, textarea::placeholder { color: var(--text-dim); }
input:focus, textarea:focus, select:focus { border-color: rgba(255,255,255,0.2); box-shadow: 0 0 0 3px rgba(255,255,255,0.04); }
input.invalid, textarea.invalid { border-color: rgba(255,80,80,0.4); }
textarea { resize: none; line-height: 1.65; }
.sel-w { position: relative; }
.sel-w::after { content: '‚Üì'; position: absolute; right: 14px; top: 50%; transform: translateY(-50%); color: var(--text-dim); pointer-events: none; font-size: 13px; }
.price-row { display: flex; gap: 8px; }
.price-row input { flex: 2.2; }
.price-row .sel-w { flex: 1; }
.chips, .cat-chips { display: flex; flex-wrap: wrap; gap: 6px; }
.chip, .cat-chip { padding: 7px 13px; border-radius: 999px; background: linear-gradient(135deg, rgba(255,255,255,0.04) 0%, rgba(255,255,255,0.01) 100%); border: 1px solid var(--glass-border); font-size: 11px; font-weight: 600; color: var(--text-mid); cursor: pointer; transition: all .16s; user-select: none; }
.chip.active, .cat-chip.active { background: linear-gradient(135deg, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0.05) 100%); border-color: rgba(255,255,255,0.22); color: #fff; box-shadow: inset 0 1px 1px rgba(255,255,255,0.08); }
.chip:active, .cat-chip:active { transform: scale(.94); }
.char-hint { text-align: right; font-size: 9px; color: var(--text-dim); margin-top: 5px; font-family: monospace; }
.note { border-left: 1px solid rgba(255,255,255,0.15); padding: 10px 13px; border-radius: 0 10px 10px 0; background: rgba(255,255,255,0.03); font-size: 12px; color: var(--text-dim); line-height: 1.6; margin-bottom: 20px; }
.preview { display: none; background: var(--glass); backdrop-filter: blur(26px); border: 1px solid var(--glass-border); border-radius: var(--r); padding: 16px 17px; margin-bottom: 20px; }
.preview.show { display: block; animation: fadeup .22s ease; }
.preview-lbl { font-size: 9px; font-weight: 700; text-transform: uppercase; letter-spacing: .2em; color: var(--text-dim); display: flex; align-items: center; gap: 6px; margin-bottom: 12px; }
.preview-lbl::before { content: ''; width: 12px; height: 1px; background: rgba(255,255,255,0.2); }
.preview-body { font-size: 12px; line-height: 1.75; color: var(--text-mid); white-space: pre-wrap; word-break: break-word; }
.preview-tags { margin-top: 12px; display: flex; flex-wrap: wrap; gap: 6px; }
.ptag { font-size: 10px; font-weight: 600; color: rgba(255,255,255,0.3); background: rgba(255,255,255,0.04); border: 1px solid var(--glass-border); padding: 3px 9px; border-radius: 20px; font-family: monospace; }


.fmt-toolbar { display: flex; gap: 6px; margin-bottom: 8px; flex-wrap: wrap; }
.fmt-btn { padding: 6px 12px; border-radius: 8px; background: linear-gradient(135deg, rgba(255,255,255,0.04) 0%, rgba(255,255,255,0.01) 100%); border: 1px solid var(--glass-border); color: var(--text-mid); font-size: 12px; font-weight: 700; cursor: pointer; transition: all .15s; user-select: none; font-family: 'Manrope', sans-serif; }
.fmt-btn:active { background: rgba(255,255,255,0.1); color: #fff; transform: scale(.93); }
.fmt-hint { font-size: 10px; color: var(--text-dim); margin-bottom: 8px; font-family: monospace; }


.upload-zone { border: 1px dashed rgba(255,255,255,0.14); border-radius: var(--r-sm); padding: 20px 16px; text-align: center; cursor: pointer; transition: border-color .18s, background .18s; background: rgba(255,255,255,0.02); }
.upload-zone:hover, .upload-zone.drag { border-color: rgba(255,255,255,0.3); background: rgba(255,255,255,0.04); }
.upload-zone .uz-icon { font-size: 22px; margin-bottom: 6px; opacity: 0.5; }
.upload-zone .uz-txt { font-size: 12px; color: var(--text-dim); }
.upload-zone .uz-sub { font-size: 10px; color: var(--text-dim); margin-top: 3px; opacity: 0.6; }
input[type=file] { display: none; }
.file-list { margin-top: 10px; display: flex; flex-direction: column; gap: 6px; }
.file-item { display: flex; align-items: center; justify-content: space-between; padding: 9px 12px; background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border); border-radius: 10px; }
.fi-name { font-size: 12px; color: var(--text-mid); flex: 1; min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.fi-size { font-size: 10px; color: var(--text-dim); margin: 0 10px; flex-shrink: 0; font-family: monospace; }
.fi-rm { font-size: 14px; color: rgba(255,80,80,0.6); cursor: pointer; flex-shrink: 0; padding: 2px 4px; line-height: 1; }
.fi-rm:active { color: rgba(255,80,80,0.9); }

.boost { display: none; margin-bottom: 22px; }
.boost.show { display: block; animation: fadeup .22s ease; }
.boost-hdr { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
.boost-ttl { font-size: 9px; font-weight: 700; text-transform: uppercase; letter-spacing: .2em; color: var(--text-dim); display: flex; align-items: center; gap: 6px; }
.boost-ttl::before { content: ''; width: 12px; height: 1px; background: rgba(255,255,255,0.2); }
.boost-sub { font-size: 9px; color: var(--text-dim); font-family: monospace; }
.boost-opt { display: flex; align-items: center; justify-content: space-between; padding: 13px 15px; margin-bottom: 6px; background: linear-gradient(135deg, rgba(255,255,255,0.04) 0%, rgba(255,255,255,0.01) 100%); border: 1px solid var(--glass-border); border-radius: var(--r-sm); cursor: pointer; transition: border-color .16s, background .16s; backdrop-filter: blur(16px); }
.boost-opt.active { border-color: rgba(255,255,255,0.2); background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%); }
.boost-opt:active { transform: scale(0.998); }
.bo-name { font-size: 13px; font-weight: 600; color: var(--text); margin-bottom: 2px; }
.bo-desc { font-size: 11px; color: var(--text-dim); }
.bo-price { font-size: 10px; font-weight: 700; font-family: monospace; color: rgba(255,255,255,0.6); background: rgba(255,255,255,0.06); border: 1px solid var(--glass-border); padding: 4px 11px; border-radius: 20px; white-space: nowrap; flex-shrink: 0; }
.bo-price.free { color: var(--text-dim); background: transparent; border-color: rgba(255,255,255,0.06); }
.btn { width: 100%; padding: 15px; background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.16); border-radius: var(--r); color: #fff; font-family: 'Unbounded', sans-serif; font-size: 10px; font-weight: 700; letter-spacing: .16em; text-transform: uppercase; cursor: pointer; transition: background .18s, border-color .18s, transform .1s; box-shadow: inset 0 1px 1px rgba(255,255,255,0.08), 0 8px 24px rgba(0,0,0,0.4); margin-top: 4px; }
.btn:active { transform: scale(.98); }
.btn:disabled { opacity: .4; cursor: not-allowed; }
.btn.outline { background: transparent; border-color: rgba(255,255,255,0.1); color: var(--text-mid); box-shadow: none; }
.suc { display: none; position: fixed; inset: 0; z-index: 2000; background: rgba(10,10,10,0.97); backdrop-filter: blur(20px); flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 40px; }
.suc.show { display: flex; animation: fadeup .32s ease; }
.suc-ring { width: 68px; height: 68px; border-radius: 50%; background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02)); border: 1px solid rgba(255,255,255,0.14); display: flex; align-items: center; justify-content: center; font-size: 22px; color: rgba(255,255,255,0.8); margin-bottom: 26px; }
.suc-ey { font-size: 9px; font-weight: 700; text-transform: uppercase; letter-spacing: .26em; color: var(--text-dim); display: flex; align-items: center; gap: 6px; justify-content: center; margin-bottom: 10px; }
.suc-ey::before,.suc-ey::after { content:''; width:16px; height:1px; background:rgba(255,255,255,0.15); }
.suc-title { font-family: 'Unbounded', sans-serif; font-size: 24px; font-weight: 700; background: linear-gradient(135deg, #fff 0%, #a3a3a3 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 10px; }
.suc-sub { font-size: 13px; color: var(--text-dim); line-height: 1.65; max-width: 260px; margin-bottom: 36px; }
#toast-wrap { position: fixed; top: 70px; left: 0; right: 0; z-index: 3000; display: flex; flex-direction: column; align-items: center; gap: 8px; pointer-events: none; }
.toast { background: rgba(20,20,20,0.96); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); border-radius: 14px; padding: 12px 18px; font-size: 13px; font-weight: 500; color: var(--text); max-width: 300px; text-align: center; pointer-events: none; animation: toast-in .22s ease; box-shadow: 0 8px 24px rgba(0,0,0,0.5); }
.toast.err { border-color: rgba(255,80,80,0.25); color: #ff8080; }
.toast.ok  { border-color: rgba(80,255,160,0.2); color: #80ffb0; }
@keyframes toast-in { from { opacity:0; transform:translateY(-10px) scale(.95); } to { opacity:1; transform:translateY(0) scale(1); } }
@keyframes toast-out { from { opacity:1; } to { opacity:0; transform:translateY(-6px); } }


.my-post-card { background: var(--glass); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); border-radius: var(--r); padding: 16px; margin-bottom: 12px; transition: border-color .16s; }
.my-post-card:active { border-color: var(--glass-border-h); }
.mpc-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
.mpc-type { font-size: 9px; font-weight: 700; text-transform: uppercase; letter-spacing: .18em; color: var(--text-dim); }
.mpc-status { font-size: 9px; font-weight: 700; letter-spacing: .1em; padding: 3px 10px; border-radius: 20px; }
.mpc-status.pending  { background: rgba(255,200,50,0.1);  color: #ffc832; border: 1px solid rgba(255,200,50,0.2); }
.mpc-status.accepted { background: rgba(80,255,160,0.08); color: #50ffa0; border: 1px solid rgba(80,255,160,0.2); }
.mpc-status.rejected { background: rgba(255,80,80,0.08);  color: #ff5050; border: 1px solid rgba(255,80,80,0.2); }
.mpc-desc { font-size: 12px; color: var(--text-mid); line-height: 1.55; margin-bottom: 10px; white-space: pre-wrap; word-break: break-word; }
.mpc-date { font-size: 10px; color: var(--text-dim); font-family: monospace; }
.mpc-boost { margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--glass-border); display: flex; gap: 8px; }
.mpc-boost-btn { flex: 1; padding: 10px 8px; border-radius: 12px; background: rgba(255,255,255,0.04); border: 1px solid var(--glass-border); color: var(--text-mid); font-size: 11px; font-weight: 600; cursor: pointer; text-align: center; transition: all .15s; }
.mpc-boost-btn:active { background: rgba(255,255,255,0.09); color: #fff; transform: scale(.97); }
.mpc-boost-btn.active-boost { border-color: rgba(255,200,50,0.3); color: #ffc832; background: rgba(255,200,50,0.06); }
.posts-empty { text-align: center; padding: 60px 20px; color: var(--text-dim); font-size: 13px; }
.posts-empty .pe-icon { font-size: 36px; margin-bottom: 12px; opacity: 0.4; }
.posts-loading { text-align: center; padding: 40px; color: var(--text-dim); font-size: 13px; }
</style>
</head>
<body>
<div id="toast-wrap"></div>
<canvas id="pc"></canvas>
<div class="orb orb-1"></div><div class="orb orb-2"></div><div class="orb orb-3"></div>
<div class="overlay" id="overlay" onclick="toggleMenu()"></div>
<div class="sidebar" id="sidebar">
  <div class="sb-brand">Roblox Developers</div>
  <div class="sb-item" onclick="goNav('my-posts'); toggleMenu()">üìã –ú–æ–∏ –ø–æ—Å—Ç—ã</div>
  <div class="sb-item" onclick="goNav('support'); toggleMenu()">üéß –ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
  <div class="sb-item" onclick="typeof tg!='undefined'&&tg.close?tg.close():null">‚úï –ó–∞–∫—Ä—ã—Ç—å</div>
  <div class="sb-ver">v4.0 ¬∑ Stable</div>
</div>

<div id="app">
  <div class="header">
    <div class="burger" onclick="toggleMenu()"><span></span><span></span><span></span></div>
    <div class="h-name">Roblox Developers</div>
    <div class="h-badge">Community</div>
  </div>
  <div class="nav">
    <div class="nav-item active" onclick="goNav('find-exec',this)">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</div>
    <div class="nav-item" onclick="goNav('find-job',this)">–†–∞–±–æ—Ç–∞</div>
    <div class="nav-item" onclick="goNav('find-team',this)">–ö–æ–º–∞–Ω–¥–∞</div>
    <div class="nav-item" onclick="goNav('guides',this)">–ì–∞–π–¥—ã</div>
  </div>
  <div class="scroll-area">
    <div class="content">

      <!-- ‚ïê‚ïê –ò–©–£ –ò–°–ü–û–õ–ù–ò–¢–ï–õ–Ø ‚ïê‚ïê -->
      <div id="page-find-exec" class="page active">
        <div class="pg-head"><div class="pg-eyebrow">–†–∞–∑–¥–µ–ª ‚Äî –§—Ä–∏–ª–∞–Ω—Å</div><div class="pg-title">–ò—â—É<br>–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</div><div class="pg-sub">–û–ø—É–±–ª–∏–∫—É–µ–º –ø–æ—Å–ª–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</div></div>
        <div class="field"><span class="f-label">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</span><div class="chips" id="exec-specs"></div></div>

        <div class="field">
          <span class="f-label">–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</span>
          <div class="fmt-toolbar">
            <div class="fmt-btn" onclick="fmt('exec-desc','**','**')" title="–ñ–∏—Ä–Ω—ã–π">ùêÅ</div>
            <div class="fmt-btn" onclick="fmt('exec-desc','_','_')" title="–ö—É—Ä—Å–∏–≤">ùêº</div>
            <div class="fmt-btn" onclick="fmt('exec-desc','`','`')" title="–ö–æ–¥">&lt;/&gt;</div>
            <div class="fmt-btn" onclick="fmt('exec-desc','||','||')" title="–°–ø–æ–π–ª–µ—Ä">üëÅ</div>
          </div>
          <div class="fmt-hint">**–∂–∏—Ä–Ω—ã–π** _–∫—É—Ä—Å–∏–≤_ `–∫–æ–¥` ||—Å–ø–æ–π–ª–µ—Ä||</div>
          <textarea id="exec-desc" rows="5" maxlength="200" placeholder="–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, —Å—Ä–æ–∫–∏, –¥–µ—Ç–∞–ª–∏‚Ä¶" oninput="c(this,'ec');bp()"></textarea>
          <div class="char-hint"><span id="ec">0</span> / 200</div>
        </div>

        <div class="field">
          <span class="f-label">–û–ø–ª–∞—Ç–∞</span>
          <div class="price-row">
            <input type="number" id="exec-price" placeholder="–°—É–º–º–∞" min="0" maxlength="10" oninput="limitNum(this,10);bp()">
            <div class="sel-w"><select id="exec-curr" onchange="ct('exec');bp()">
              <option>RUB</option><option>USD</option><option>Robux</option><option>KZT</option><option>Crypto</option><option>%revenue</option>
            </select></div>
          </div>
          <div id="exec-cw" style="display:none;margin-top:8px"><input type="text" id="exec-cn" placeholder="TON, USDT, BTC‚Ä¶" oninput="bp()"></div>
          <div id="exec-rev" style="display:none;margin-top:8px"><div class="note">–£–∫–∞–∂–∏—Ç–µ % –æ—Ç –¥–æ—Ö–æ–¥–∞ –∏–≥—Ä—ã. –ù–∞–ø—Ä–∏–º–µ—Ä: 30 = 30% –ø—Ä–∏–±—ã–ª–∏</div></div>
        </div>

        <div class="field">
          <span class="f-label">–ö–æ–Ω—Ç–∞–∫—Ç</span>
          <input type="text" id="exec-contact" placeholder="@username –∏–ª–∏ https://‚Ä¶" maxlength="15" oninput="valContact(this);bp()">
          <div class="char-hint"><span id="exec-cl">0</span> / 15</div>
        </div>

        <div class="field">
          <span class="f-label">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—é</span>
          <div class="upload-zone" onclick="triggerUpload('exec-img-inp')" id="exec-img-zone"
            ondragover="dragOver(event,this)" ondragleave="dragLeave(this)" ondrop="dropFile(event,'exec-img-inp',true)">
            <div class="uz-icon">üñº</div>
            <div class="uz-txt">–ù–∞–∂–º–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
            <div class="uz-sub">JPG, PNG, WEBP ¬∑ –¥–æ 5 –ú–ë</div>
          </div>
          <input type="file" id="exec-img-inp" accept="image/jpeg,image/png,image/webp" onchange="handleFiles(this,'exec-img-list',true)">
          <div class="file-list" id="exec-img-list"></div>
        </div>

        <div class="preview" id="exec-preview"><div class="preview-lbl">–ü—Ä–µ–≤—å—é –ø–æ—Å—Ç–∞</div><div class="preview-body" id="exec-pb"></div><div class="preview-tags" id="exec-pt"></div></div>
        <button class="btn" onclick="send('find-exec')">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</button>
      </div>

      <!-- ‚ïê‚ïê –ò–©–£ –†–ê–ë–û–¢–£ ‚ïê‚ïê -->
      <div id="page-find-job" class="page">
        <div class="pg-head"><div class="pg-eyebrow">–†–∞–∑–¥–µ–ª ‚Äî –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</div><div class="pg-title">–ò—â—É<br>—Ä–∞–±–æ—Ç—É</div><div class="pg-sub">–ó–∞–∫–∞–∑—á–∏–∫–∏ –Ω–∞–π–¥—É—Ç –≤–∞—Å –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</div></div>
        <div class="field"><span class="f-label">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</span><div class="chips" id="job-specs"></div></div>

        <div class="field">
          <span class="f-label">–û —Å–µ–±–µ –∏ –æ–ø—ã—Ç–µ</span>
          <div class="fmt-toolbar">
            <div class="fmt-btn" onclick="fmt('job-exp','**','**')">ùêÅ</div>
            <div class="fmt-btn" onclick="fmt('job-exp','_','_')">ùêº</div>
            <div class="fmt-btn" onclick="fmt('job-exp','`','`')">&lt;/&gt;</div>
            <div class="fmt-btn" onclick="fmt('job-exp','||','||')">üëÅ</div>
          </div>
          <div class="fmt-hint">**–∂–∏—Ä–Ω—ã–π** _–∫—É—Ä—Å–∏–≤_ `–∫–æ–¥` ||—Å–ø–æ–π–ª–µ—Ä||</div>
          <textarea id="job-exp" rows="5" maxlength="200" placeholder="–û–ø—ã—Ç, –ø—Ä–æ–µ–∫—Ç—ã, –Ω–∞–≤—ã–∫–∏‚Ä¶" oninput="c(this,'jc');bp()"></textarea>
          <div class="char-hint"><span id="jc">0</span> / 200</div>
        </div>

        <div class="field">
          <span class="f-label">–°—Ç–∞–≤–∫–∞</span>
          <div class="price-row">
            <input type="number" id="job-price" placeholder="–û—Ç‚Ä¶" min="0" oninput="limitNum(this,10);bp()">
            <div class="sel-w"><select id="job-curr" onchange="ct('job');bp()">
              <option>RUB</option><option>USD</option><option>Robux</option><option>KZT</option><option>Crypto</option><option>%revenue</option>
            </select></div>
          </div>
          <div id="job-cw" style="display:none;margin-top:8px"><input type="text" id="job-cn" placeholder="TON, USDT, BTC‚Ä¶" oninput="bp()"></div>
          <div id="job-rev" style="display:none;margin-top:8px"><div class="note">% –æ—Ç –¥–æ—Ö–æ–¥–∞ –∏–≥—Ä—ã (—Ä–æ—è–ª—Ç–∏)</div></div>
        </div>

        <div class="field">
          <span class="f-label">–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</span>
          <input type="url" id="job-port" placeholder="https://‚Ä¶" oninput="valUrl(this);bp()">
          <div id="job-port-err" style="font-size:10px;color:#ff8080;margin-top:4px;display:none">–¢–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∞ (https://‚Ä¶)</div>
        </div>

        <div class="field">
          <span class="f-label">–ö–æ–Ω—Ç–∞–∫—Ç</span>
          <input type="text" id="job-contact" placeholder="@username –∏–ª–∏ https://‚Ä¶" maxlength="15" oninput="valContact(this);bp()">
          <div class="char-hint"><span id="job-cl">0</span> / 15</div>
        </div>

        <div class="field">
          <span class="f-label">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—é</span>
          <div class="upload-zone" onclick="triggerUpload('job-img-inp')" id="job-img-zone"
            ondragover="dragOver(event,this)" ondragleave="dragLeave(this)" ondrop="dropFile(event,'job-img-inp',true)">
            <div class="uz-icon">üñº</div>
            <div class="uz-txt">–ù–∞–∂–º–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
            <div class="uz-sub">JPG, PNG, WEBP ¬∑ –¥–æ 5 –ú–ë</div>
          </div>
          <input type="file" id="job-img-inp" accept="image/jpeg,image/png,image/webp" onchange="handleFiles(this,'job-img-list',true)">
          <div class="file-list" id="job-img-list"></div>
        </div>

        <div class="preview" id="job-preview"><div class="preview-lbl">–ü—Ä–µ–≤—å—é –ø–æ—Å—Ç–∞</div><div class="preview-body" id="job-pb"></div><div class="preview-tags" id="job-pt"></div></div>
        <button class="btn" onclick="send('find-job')">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</button>
      </div>

      <!-- ‚ïê‚ïê –ò–©–£ –ö–û–ú–ê–ù–î–£ ‚ïê‚ïê -->
      <div id="page-find-team" class="page">
        <div class="pg-head"><div class="pg-eyebrow">–†–∞–∑–¥–µ–ª ‚Äî –ö–æ–º–∞–Ω–¥—ã</div><div class="pg-title">–ò—â—É<br>–∫–æ–º–∞–Ω–¥—É</div><div class="pg-sub">–ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞</div></div>
        <div class="field"><span class="f-label">–ö—Ç–æ –≤—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ</span><div class="chips" id="team-role"></div></div>
        <div class="field"><span class="f-label">–ò—â–µ–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤</span><div class="chips" id="team-need"></div></div>

        <div class="field">
          <span class="f-label">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</span>
          <div class="fmt-toolbar">
            <div class="fmt-btn" onclick="fmt('team-desc','**','**')">ùêÅ</div>
            <div class="fmt-btn" onclick="fmt('team-desc','_','_')">ùêº</div>
            <div class="fmt-btn" onclick="fmt('team-desc','`','`')">&lt;/&gt;</div>
            <div class="fmt-btn" onclick="fmt('team-desc','||','||')">üëÅ</div>
          </div>
          <div class="fmt-hint">**–∂–∏—Ä–Ω—ã–π** _–∫—É—Ä—Å–∏–≤_ `–∫–æ–¥` ||—Å–ø–æ–π–ª–µ—Ä||</div>
          <textarea id="team-desc" rows="6" maxlength="200" placeholder="–ò–¥–µ—è, –º–µ—Ö–∞–Ω–∏–∫–∞, —Ü–µ–ª–∏‚Ä¶" oninput="c(this,'tc');bp()"></textarea>
          <div class="char-hint"><span id="tc">0</span> / 200</div>
        </div>

        <div class="field"><span class="f-label">–£—Å–ª–æ–≤–∏—è</span><div class="sel-w"><select id="team-pay" onchange="bp()">
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç</option>
          <option>–†–æ—è–ª—Ç–∏ ‚Äî % –æ—Ç –ø—Ä–∏–±—ã–ª–∏</option>
          <option>–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞</option>
          <option>–î–ª—è –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ / –±–µ—Å–ø–ª–∞—Ç–Ω–æ</option>
          <option>–û–±—Å—É–∂–¥–∞–µ—Ç—Å—è</option>
        </select></div></div>

        <div class="field">
          <span class="f-label">–ö–æ–Ω—Ç–∞–∫—Ç</span>
          <input type="text" id="team-contact" placeholder="@username –∏–ª–∏ https://‚Ä¶" maxlength="15" oninput="valContact(this);bp()">
          <div class="char-hint"><span id="team-cl">0</span> / 15</div>
        </div>

        <div class="field">
          <span class="f-label">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—é</span>
          <div class="upload-zone" onclick="triggerUpload('team-img-inp')" id="team-img-zone"
            ondragover="dragOver(event,this)" ondragleave="dragLeave(this)" ondrop="dropFile(event,'team-img-inp',true)">
            <div class="uz-icon">üñº</div>
            <div class="uz-txt">–ù–∞–∂–º–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
            <div class="uz-sub">JPG, PNG, WEBP ¬∑ –¥–æ 5 –ú–ë</div>
          </div>
          <input type="file" id="team-img-inp" accept="image/jpeg,image/png,image/webp" onchange="handleFiles(this,'team-img-list',true)">
          <div class="file-list" id="team-img-list"></div>
        </div>

        <div class="preview" id="team-preview"><div class="preview-lbl">–ü—Ä–µ–≤—å—é –ø–æ—Å—Ç–∞</div><div class="preview-body" id="team-pb"></div><div class="preview-tags" id="team-pt"></div></div>
        <button class="btn" onclick="send('find-team')">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</button>
      </div>

      <!-- ‚ïê‚ïê –ì–ê–ô–î–´ ‚ïê‚ïê -->
      <div id="page-guides" class="page">
        <div class="pg-head"><div class="pg-eyebrow">–†–∞–∑–¥–µ–ª ‚Äî –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</div><div class="pg-title">–ù–∞–ø–∏—Å–∞—Ç—å<br>–≥–∞–π–¥</div><div class="pg-sub">–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è –≤ –∫–∞–Ω–∞–ª–µ</div></div>

        <div class="field">
          <span class="f-label">–ó–∞–≥–æ–ª–æ–≤–æ–∫</span>
          <input type="text" id="g-title" maxlength="80" placeholder="–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å‚Ä¶" oninput="c(this,'gt');bp()">
          <div class="char-hint"><span id="gt">0</span> / 80</div>
        </div>

        <div class="field"><span class="f-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</span><div class="cat-chips" id="guide-cats"></div></div>
        <div class="field"><span class="f-label">–£—Ä–æ–≤–µ–Ω—å</span><div class="sel-w"><select id="g-level"><option>–ù–æ–≤–∏—á–æ–∫</option><option>–°—Ä–µ–¥–Ω–∏–π</option><option>–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option></select></div></div>

        <div class="field">
          <span class="f-label">–¢–µ–∫—Å—Ç –≥–∞–π–¥–∞</span>
          <div class="fmt-toolbar">
            <div class="fmt-btn" onclick="fmt('g-content','**','**')">ùêÅ</div>
            <div class="fmt-btn" onclick="fmt('g-content','_','_')">ùêº</div>
            <div class="fmt-btn" onclick="fmt('g-content','`','`')">&lt;/&gt;</div>
            <div class="fmt-btn" onclick="fmt('g-content','```\n','\n```')" title="–ë–ª–æ–∫ –∫–æ–¥–∞">‚å•</div>
            <div class="fmt-btn" onclick="fmt('g-content','||','||')">üëÅ</div>
          </div>
          <div class="fmt-hint">**–∂–∏—Ä–Ω—ã–π** _–∫—É—Ä—Å–∏–≤_ `–∫–æ–¥` ```–±–ª–æ–∫``` ||—Å–ø–æ–π–ª–µ—Ä||</div>
          <textarea id="g-content" rows="11" maxlength="3000" placeholder="–®–∞–≥–∏, –æ–±—ä—è—Å–Ω–µ–Ω–∏—è, –ø—Ä–∏–º–µ—Ä—ã‚Ä¶" oninput="c(this,'gc');bp()"></textarea>
          <div class="char-hint"><span id="gc">0</span> / 3000</div>
        </div>

        <div class="field">
          <span class="f-label">–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª—ã –∫ –≥–∞–π–¥—É</span>
          <div class="upload-zone" onclick="triggerUpload('guide-file-inp')" id="guide-file-zone"
            ondragover="dragOver(event,this)" ondragleave="dragLeave(this)" ondrop="dropFile(event,'guide-file-inp',false)">
            <div class="uz-icon">üìé</div>
            <div class="uz-txt">–ù–∞–∂–º–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã</div>
            <div class="uz-sub">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, PDF, .rbxl, .lua ¬∑ –¥–æ 20 –ú–ë ¬∑ –º–∞–∫—Å. 5 —Ñ–∞–π–ª–æ–≤</div>
          </div>
          <input type="file" id="guide-file-inp" multiple accept="image/*,.pdf,.rbxl,.lua,.txt" onchange="handleFiles(this,'guide-file-list',false)">
          <div class="file-list" id="guide-file-list"></div>
        </div>

        <div class="preview" id="guide-preview"><div class="preview-lbl">–ü—Ä–µ–≤—å—é –≥–∞–π–¥–∞</div><div class="preview-body" id="guide-pb"></div><div class="preview-tags" id="guide-pt"></div></div>
        <button class="btn" onclick="send('guides')">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</button>
      </div>

      <!-- ‚ïê‚ïê –ü–û–î–î–ï–†–ñ–ö–ê ‚ïê‚ïê -->

      <div id="page-my-posts" class="page">
        <div class="pg-head"><div class="pg-eyebrow">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</div><div class="pg-title">–ú–æ–∏<br>–ø–æ—Å—Ç—ã</div><div class="pg-sub">–í–∞—à–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏ –≥–∞–π–¥—ã</div></div>
        <div id="my-posts-list"><div class="posts-loading">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div></div>
      </div>

      <div id="page-support" class="page">
        <div class="pg-head"><div class="pg-eyebrow">–°–ª—É–∂–µ–±–Ω—ã–π —Ä–∞–∑–¥–µ–ª</div><div class="pg-title">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div></div>
        <div class="note">–û—Ç–≤–µ—Ç–∏–º –≤ —á–∞—Ç–µ –±–æ—Ç–∞. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å ‚Äî –Ω–µ —Ä–∞–Ω—å—à–µ —á–µ–º —á–µ—Ä–µ–∑ 2 —á–∞—Å–∞.</div>
        <div class="field"><span class="f-label">–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É</span><textarea id="s-txt" rows="9" maxlength="1000" placeholder="–ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å?" oninput="c(this,'sc')"></textarea><div class="char-hint"><span id="sc">0</span> / 1000</div></div>
        <button class="btn outline" onclick="sendSup()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å</button>
      </div>

    </div>
  </div>
</div>

<div class="suc" id="suc">
  <div class="suc-ey" id="suc-lbl">–ì–æ—Ç–æ–≤–æ</div>
  <div class="suc-ring" id="suc-icon">‚úì</div>
  <div class="suc-title" id="suc-title">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</div>
  <div class="suc-sub" id="suc-sub">–í–∞—à –ø–æ—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.</div>
  <button class="btn" onclick="closeSuc()" style="max-width:180px;margin:0 auto">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<script>
function toast(msg, type='err', ms=3000) {
  const wrap = document.getElementById('toast-wrap');
  const el = document.createElement('div');
  el.className = 'toast ' + type;
  el.textContent = msg;
  wrap.appendChild(el);
  setTimeout(() => { el.style.animation = 'toast-out .22s ease forwards'; setTimeout(() => el.remove(), 220); }, ms);
}

const tg = (typeof Telegram !== 'undefined' && Telegram.WebApp) ? Telegram.WebApp : {
  expand: () => {}, ready: () => {}, initDataUnsafe: { user: { id: 0 } }, showAlert: m => alert(m), close: () => {}
};
tg.expand(); tg.ready();
if (tg.disableVerticalSwipes) tg.disableVerticalSwipes();

const API_URL = "https://freelanceroblox.py0drama.workers.dev/";

const SPECS = ['–°–∫—Ä–∏–ø—Ç–µ—Ä','–ë–∏–ª–¥–µ—Ä','–ú–æ–¥–µ–ª–µ—Ä','UI/UX','VFX','GFX','–ê–Ω–∏–º–∞—Ç–æ—Ä','–ì–µ–π–º–¥–∏–∑.','–¢–µ—Å—Ç–µ—Ä'];
const ROLES = ['–°–∫—Ä–∏–ø—Ç–µ—Ä','–ë–∏–ª–¥–µ—Ä','–ú–æ–¥–µ–ª–µ—Ä','UI/UX','VFX','GFX','–ê–Ω–∏–º–∞—Ç–æ—Ä','–ì–µ–π–º–¥–∏–∑.','–ú–µ–Ω–µ–¥–∂–µ—Ä'];
const GCATS = ['–°–∫—Ä–∏–ø—Ç–∏–Ω–≥','–ë–∏–ª–¥–∏–Ω–≥','–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã','VFX','–ê–Ω–∏–º–∞—Ü–∏—è','–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è','–î—Ä—É–≥–æ–µ'];
const S = { execSpecs:[], jobSpecs:[], teamRole:[], teamNeed:[], guideCat:null, boosts:{exec:'none',job:'none',team:'none',guide:'none'} };

// –•—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤: {inputId: [{name, size, file}]}
const FILES = {};
let cur = 'find-exec';

function fmt(textareaId, before, after) {
  const ta = document.getElementById(textareaId);
  if (!ta) return;
  const s = ta.selectionStart, e = ta.selectionEnd;
  const selected = ta.value.substring(s, e);
  const replacement = before + (selected || '—Ç–µ–∫—Å—Ç') + after;
  ta.value = ta.value.substring(0, s) + replacement + ta.value.substring(e);
  const newPos = selected ? s + replacement.length : s + before.length + 4;
  ta.selectionStart = selected ? s + before.length : s + before.length;
  ta.selectionEnd = selected ? e + before.length + after.length : s + before.length + 4;
  ta.focus();
  // –û–±–Ω–æ–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫
  const counterMap = {'exec-desc':'ec','job-exp':'jc','team-desc':'tc','g-content':'gc'};
  const cid = counterMap[textareaId];
  if (cid) { const cel = document.getElementById(cid); if(cel) cel.textContent = ta.value.length; }
  bp();
}

function triggerUpload(id) { document.getElementById(id)?.click(); }

function handleFiles(input, listId, imgOnly) {
  const iid = input.id;
  if (!FILES[iid]) FILES[iid] = [];
  const maxFiles = imgOnly ? 1 : 5;
  const maxSize = imgOnly ? 5 * 1024 * 1024 : 20 * 1024 * 1024;
  Array.from(input.files).forEach(f => {
    if (FILES[iid].length >= maxFiles) { toast(`–ú–∞–∫—Å–∏–º—É–º ${maxFiles} ${imgOnly ? '–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ' : '—Ñ–∞–π–ª–æ–≤'}`); return; }
    if (f.size > maxSize) { toast(`–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π: ${f.name}`); return; }
    if (FILES[iid].some(x => x.name === f.name)) return;
    FILES[iid].push({ name: f.name, size: f.size, file: f });
  });
  input.value = '';
  renderFileList(iid, listId);
}

function renderFileList(iid, listId) {
  const list = document.getElementById(listId); if (!list) return;
  list.innerHTML = '';
  (FILES[iid] || []).forEach((f, i) => {
    const d = document.createElement('div'); d.className = 'file-item';
    const isImg = f.file.type.startsWith('image/');
    d.innerHTML = `<span class="fi-name">${isImg ? 'üñº ' : 'üìÑ '}${f.name}</span><span class="fi-size">${fmtSize(f.size)}</span><span class="fi-rm" onclick="removeFile('${iid}','${listId}',${i})">‚úï</span>`;
    list.appendChild(d);
  });
}

function removeFile(iid, listId, idx) {
  if (FILES[iid]) { FILES[iid].splice(idx, 1); renderFileList(iid, listId); }
}

function fmtSize(b) {
  if (b < 1024) return b + ' –ë';
  if (b < 1048576) return (b/1024).toFixed(1) + ' –ö–ë';
  return (b/1048576).toFixed(1) + ' –ú–ë';
}

function dragOver(e, zone) { e.preventDefault(); zone.classList.add('drag'); }
function dragLeave(zone) { zone.classList.remove('drag'); }
function dropFile(e, inputId, imgOnly) {
  e.preventDefault();
  const zone = e.currentTarget; zone.classList.remove('drag');
  const input = document.getElementById(inputId); if (!input) return;
  const dt = e.dataTransfer;
  const listId = inputId.replace('-inp', '-list');
  const fakeInput = { id: inputId, files: dt.files, value: '' };
  handleFiles(fakeInput, listId, imgOnly);
}

function valContact(inp) {
  const v = inp.value;
  const cl = document.getElementById(inp.id.replace('-contact','-cl') + '') || 
             document.getElementById(inp.id === 'exec-contact' ? 'exec-cl' : inp.id === 'job-contact' ? 'job-cl' : 'team-cl');
  if (cl) cl.textContent = v.length;
  // –†–∞–∑—Ä–µ—à–∞–µ–º @username –∏–ª–∏ https://
  const ok = /^@[a-zA-Z0-9_]{0,14}$/.test(v) || /^https?:\/\/.+/.test(v) || v === '';
  inp.classList.toggle('invalid', !ok && v.length > 0);
}

function valUrl(inp) {
  const v = inp.value.trim();
  const errId = inp.id + '-err';
  const err = document.getElementById(errId);
  const ok = v === '' || /^https?:\/\/.+/.test(v);
  if (err) err.style.display = ok ? 'none' : 'block';
  inp.classList.toggle('invalid', !ok);
}

function limitNum(inp, maxLen) {
  // –¢–æ–ª—å–∫–æ —Ü–µ–ª—ã–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞, –º–∞–∫—Å–∏–º—É–º maxLen —Å–∏–º–≤–æ–ª–æ–≤
  let v = inp.value.replace(/[^0-9]/g, '');
  if (v.length > maxLen) v = v.substring(0, maxLen);
  if (v.startsWith('0') && v.length > 1) v = v.replace(/^0+/, '') || '0';
  inp.value = v;
}

function mkC(id, arr, key, cb) {
  const el = document.getElementById(id); if (!el) return;
  arr.forEach(s => {
    const d = document.createElement('div'); d.className='chip'; d.textContent=s;
    d.onclick = () => { const i=S[key].indexOf(s); i>-1?(S[key].splice(i,1),d.classList.remove('active')):(S[key].push(s),d.classList.add('active')); cb&&cb(); };
    el.appendChild(d);
  });
}
function mkCC(id, arr, cb) {
  const el = document.getElementById(id); if (!el) return;
  arr.forEach(s => {
    const d = document.createElement('div'); d.className='cat-chip'; d.textContent=s;
    d.onclick = () => { el.querySelectorAll('.cat-chip').forEach(x=>x.classList.remove('active')); d.classList.add('active'); S.guideCat=s; cb&&cb(); };
    el.appendChild(d);
  });
}
mkC('exec-specs', SPECS, 'execSpecs', ()=>{bp();sb('exec');});
mkC('job-specs',  SPECS, 'jobSpecs',  ()=>{bp();sb('job');});
mkC('team-role',  ROLES, 'teamRole',  ()=>bp());
mkC('team-need',  SPECS, 'teamNeed',  ()=>{bp();sb('team');});
mkCC('guide-cats', GCATS, ()=>{bp();sb('guide');});

function goNav(id, el) {
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  const pg = document.getElementById('page-'+id); if(pg) pg.classList.add('active');
  if(el) el.classList.add('active');
  document.querySelector('.scroll-area').scrollTop = 0;
  cur = id; bp();
  if(id==='my-posts') loadMyPosts();
}
function toggleMenu() {
  const s=document.getElementById('sidebar'), o=document.getElementById('overlay');
  const op=s.classList.toggle('open'); o.style.display=op?'block':'none';
}

function sb(sec) { const el=document.getElementById(sec+'-boost'); if(el) el.classList.add('show'); }
function pb2(el, sec, type) { el.closest('.boost').querySelectorAll('.boost-opt').forEach(x=>x.classList.remove('active')); el.classList.add('active'); S.boosts[sec]=type; }
function ct(p) {
  const cu=document.getElementById(p+'-curr'), w=document.getElementById(p+'-cw'), rv=document.getElementById(p+'-rev');
  if(cu&&w) w.style.display=cu.value==='Crypto'?'block':'none';
  if(cu&&rv) rv.style.display=cu.value==='%revenue'?'block':'none';
}
function c(el, id) { const x=document.getElementById(id); if(x) x.textContent=el.value.length; }
function vv(id) { const el=document.getElementById(id); return el?el.value.trim():''; }
function tag(s) { return '#'+s.toLowerCase().replace(/[^a-z–∞-—è—ë–Å0-9]/gi,''); }
function setp(id, body, tags) {
  const card=document.getElementById(id+'-preview'), pb=document.getElementById(id+'-pb'), pt=document.getElementById(id+'-pt');
  if(!card||!pb) return;
  if(!body.trim()) { card.classList.remove('show'); return; }
  pb.textContent=body.trim();
  if(pt) pt.innerHTML=tags.map(t=>`<span class="ptag">${t}</span>`).join('');
  card.classList.add('show');
}

function bp() {
  if(cur==='find-exec'){const sp=S.execSpecs,desc=vv('exec-desc'),price=vv('exec-price'),curr=vv('exec-curr'),con=vv('exec-contact');if(!sp.length&&!desc){document.getElementById('exec-preview').classList.remove('show');return;}let t='–ò–©–ï–ú –ò–°–ü–û–õ–ù–ò–¢–ï–õ–Ø\n';if(sp.length)t+='\n–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: '+sp.join(', ');if(desc)t+='\n\n'+desc;if(price)t+='\n\n–û–ø–ª–∞—Ç–∞: '+price+(curr==='%revenue'?' % –æ—Ç –ø—Ä–∏–±—ã–ª–∏':' '+(curr==='Crypto'?(vv('exec-cn')||'Crypto'):curr));if(con)t+='\n–ö–æ–Ω—Ç–∞–∫—Ç: '+con;setp('exec',t,['#–∏—â—É_–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è','#—Ñ—Ä–∏–ª–∞–Ω—Å_roblox',...sp.map(tag)]);sb('exec');}
  else if(cur==='find-job'){const sp=S.jobSpecs,exp=vv('job-exp'),price=vv('job-price'),curr=vv('job-curr'),port=vv('job-port'),con=vv('job-contact');if(!sp.length&&!exp){document.getElementById('job-preview').classList.remove('show');return;}let t='–ò–©–£ –†–ê–ë–û–¢–£ / –ó–ê–ö–ê–ó–´\n';if(sp.length)t+='\n–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: '+sp.join(', ');if(exp)t+='\n\n'+exp;if(price)t+='\n\n–°—Ç–∞–≤–∫–∞: –æ—Ç '+price+(curr==='%revenue'?' % –æ—Ç –ø—Ä–∏–±—ã–ª–∏':' '+(curr==='Crypto'?(vv('job-cn')||'Crypto'):curr));if(port)t+='\n–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ: '+port;if(con)t+='\n–ö–æ–Ω—Ç–∞–∫—Ç: '+con;setp('job',t,['#–∏—â—É_—Ä–∞–±–æ—Ç—É','#—Ñ—Ä–∏–ª–∞–Ω—Å_roblox',...sp.map(tag)]);sb('job');}
  else if(cur==='find-team'){const roles=S.teamRole,need=S.teamNeed,desc=vv('team-desc'),pay=vv('team-pay'),con=vv('team-contact');if(!roles.length&&!desc){document.getElementById('team-preview').classList.remove('show');return;}let t='–ò–©–ï–ú –ö–û–ú–ê–ù–î–£\n';if(roles.length)t+='\n–Ø: '+roles.join(', ');if(need.length)t+='\n–ò—â–µ–º: '+need.join(', ');if(desc)t+='\n\n'+desc;if(pay)t+='\n\n–£—Å–ª–æ–≤–∏—è: '+pay;if(con)t+='\n–ö–æ–Ω—Ç–∞–∫—Ç: '+con;setp('team',t,['#–∏—â—É_–∫–æ–º–∞–Ω–¥—É','#roblox_team',...need.map(tag)]);sb('team');}
  else if(cur==='guides'){const title=vv('g-title'),content=vv('g-content'),cat=S.guideCat,level=vv('g-level');if(!title&&!content){document.getElementById('guide-preview').classList.remove('show');return;}let t='–ì–ê–ô–î\n';if(title)t+='\n'+title;if(cat)t+='\n–ö–∞—Ç–µ–≥–æ—Ä–∏—è: '+cat;if(level)t+='\n–£—Ä–æ–≤–µ–Ω—å: '+level;if(content)t+='\n\n'+content.substring(0,300)+(content.length>300?'...':'');setp('guide',t,['#–≥–∞–π–¥_roblox',...(cat?[tag(cat)]:[]),(level?tag(level):'')].filter(Boolean));sb('guide');}
}

function validate(type) {
  if(type==='find-exec'){
    if(!S.execSpecs.length&&!vv('exec-desc')) return '–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –æ–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É';
    if(!vv('exec-contact')) return '–£–∫–∞–∂–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç';
    const con = vv('exec-contact');
    if(!/^@[a-zA-Z0-9_]{1,14}$/.test(con) && !/^https?:\/\/.+/.test(con)) return '–ö–æ–Ω—Ç–∞–∫—Ç: @username –∏–ª–∏ https://‚Ä¶';
  }
  if(type==='find-job'){
    if(!S.jobSpecs.length&&!vv('job-exp')) return '–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ —Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ';
    if(!vv('job-contact')) return '–£–∫–∞–∂–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç';
    const con = vv('job-contact');
    if(!/^@[a-zA-Z0-9_]{1,14}$/.test(con) && !/^https?:\/\/.+/.test(con)) return '–ö–æ–Ω—Ç–∞–∫—Ç: @username –∏–ª–∏ https://‚Ä¶';
    const port = vv('job-port');
    if(port && !/^https?:\/\/.+/.test(port)) return '–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ: —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∞ https://‚Ä¶';
  }
  if(type==='find-team'){
    if(!vv('team-desc')) return '–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç';
    if(!vv('team-contact')) return '–£–∫–∞–∂–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç';
    const con = vv('team-contact');
    if(!/^@[a-zA-Z0-9_]{1,14}$/.test(con) && !/^https?:\/\/.+/.test(con)) return '–ö–æ–Ω—Ç–∞–∫—Ç: @username –∏–ª–∏ https://‚Ä¶';
  }
  if(type==='guides'){
    if(!vv('g-title')) return '–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫';
    if(!S.guideCat) return '–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é';
    if(!vv('g-content')) return '–ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç –≥–∞–π–¥–∞';
  }
  return null;
}

function buildP(type) {
  const uid = tg.initDataUnsafe?.user?.id || 0;
  const p = { user_id: uid, type, boost: 'none' };
  if(type==='find-exec'){
    p.specs=S.execSpecs;p.description=vv('exec-desc');
    p.price=vv('exec-price');p.currency=vv('exec-curr');
    if(p.currency==='Crypto') p.crypto_name=vv('exec-cn');
    p.contact=vv('exec-contact');
    p.hashtags=['#–∏—â—É_–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è','#—Ñ—Ä–∏–ª–∞–Ω—Å_roblox',...S.execSpecs.map(tag)];
  } else if(type==='find-job'){
    p.specs=S.jobSpecs;p.experience=vv('job-exp');
    p.price=vv('job-price');p.currency=vv('job-curr');
    if(p.currency==='Crypto') p.crypto_name=vv('job-cn');
    p.portfolio=vv('job-port');p.contact=vv('job-contact');
    p.hashtags=['#–∏—â—É_—Ä–∞–±–æ—Ç—É','#—Ñ—Ä–∏–ª–∞–Ω—Å_roblox',...S.jobSpecs.map(tag)];
  } else if(type==='find-team'){
    p.my_role=S.teamRole;p.need=S.teamNeed;
    p.description=vv('team-desc');p.payment=vv('team-pay');p.contact=vv('team-contact');
    p.hashtags=['#–∏—â—É_–∫–æ–º–∞–Ω–¥—É','#roblox_team',...S.teamNeed.map(tag)];
  } else if(type==='guides'){
    p.title=vv('g-title');p.category=S.guideCat;p.level=vv('g-level');p.content=vv('g-content');
    p.hashtags=['#–≥–∞–π–¥_roblox',...(S.guideCat?[tag(S.guideCat)]:[])].filter(Boolean);
  }
  return p;
}

function send(type) {
  const err = validate(type); if(err){ toast(err); return; }

  // –°–æ–±–∏—Ä–∞–µ–º —Ñ–∞–π–ª—ã
  const imgMap = {'find-exec':'exec-img-inp','find-job':'job-img-inp','find-team':'team-img-inp','guides':'guide-file-inp'};
  const fid = imgMap[type];
  const attachedFiles = FILES[fid] || [];

  const payload = buildP(type);

  if (attachedFiles.length > 0) {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ FormData
    const fd = new FormData();
    fd.append('data', JSON.stringify(payload));
    attachedFiles.forEach((f, i) => fd.append(`file_${i}`, f.file, f.name));
    doFetchForm(fd, type);
  } else {
    doFetch(payload, type);
  }
}

function sendSup() {
  const txt = document.getElementById('s-txt')?.value.trim(); if(!txt){ toast('–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É'); return; }
  doFetch({ user_id: tg.initDataUnsafe?.user?.id||0, type:'support_request', text:txt }, 'support');
}

function doFetch(data, type) {
  document.querySelectorAll('.btn').forEach(b=>b.disabled=true);
  fetch(API_URL, { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(data) })
    .then(r=>r.json())
    .then(res=>{ document.querySelectorAll('.btn').forEach(b=>b.disabled=false); if(res.status==='limit') toast(res.message||'–õ–∏–º–∏—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.'); else showSuc(type); })
    .catch(e=>{ document.querySelectorAll('.btn').forEach(b=>b.disabled=false); toast('–û—à–∏–±–∫–∞: '+e.message); });
}

function doFetchForm(fd, type) {
  document.querySelectorAll('.btn').forEach(b=>b.disabled=true);
  fetch(API_URL, { method:'POST', body: fd })
    .then(r=>r.json())
    .then(res=>{ document.querySelectorAll('.btn').forEach(b=>b.disabled=false); if(res.status==='limit') toast(res.message||'–õ–∏–º–∏—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.'); else showSuc(type); })
    .catch(e=>{ document.querySelectorAll('.btn').forEach(b=>b.disabled=false); toast('–û—à–∏–±–∫–∞: '+e.message); });
}

const SD = {
  'find-exec':{lbl:'–û–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ',icon:'‚úì',title:'–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ',sub:'–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ –∫–∞–Ω–∞–ª–µ.'},
  'find-job': {lbl:'–ê–Ω–∫–µ—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞',    icon:'‚úì',title:'–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ',sub:'–ó–∞–∫–∞–∑—á–∏–∫–∏ –Ω–∞–π–¥—É—Ç –≤–∞—Å –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.'},
  'find-team':{lbl:'–û–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ',icon:'‚úì',title:'–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ',sub:'–°–∫–æ—Ä–æ –Ω–∞–π–¥—ë—Ç–µ –∫–æ–º–∞–Ω–¥—É.'},
  'guides':   {lbl:'–ì–∞–π–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω',   icon:'‚úì',title:'–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏',sub:'–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–∞–π–¥ –ø–æ—è–≤–∏—Ç—Å—è –≤ –∫–∞–Ω–∞–ª–µ.'},
  'support':  {lbl:'–ó–∞–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç',    icon:'‚Üí',title:'–û—Ç–≤–µ—Ç–∏–º –≤ –±–æ—Ç–µ',sub:'–û–±—ã—á–Ω–æ –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Å–æ–≤.'}
};
function showSuc(type) {
  const d=SD[type]||SD['find-exec'];
  document.getElementById('suc-lbl').textContent=d.lbl;
  document.getElementById('suc-icon').textContent=d.icon;
  document.getElementById('suc-title').textContent=d.title;
  document.getElementById('suc-sub').textContent=d.sub;
  document.getElementById('suc').classList.add('show');
}
function closeSuc() { document.getElementById('suc').classList.remove('show'); }


const TYPE_LABELS = {
  'find-exec': 'üîç –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å',
  'find-job':  'üíº –†–∞–±–æ—Ç–∞',
  'find-team': 'ü§ù –ö–æ–º–∞–Ω–¥–∞',
  'guides':    'üìò –ì–∞–π–¥'
};
const STATUS_LABELS = {
  'pending':  {text:'–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏', cls:'pending'},
  'accepted': {text:'–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω',  cls:'accepted'},
  'rejected': {text:'–û—Ç–∫–ª–æ–Ω—ë–Ω',    cls:'rejected'}
};

async function loadMyPosts() {
  const uid = tg.initDataUnsafe?.user?.id || 0;
  const list = document.getElementById('my-posts-list');
  list.innerHTML = '<div class="posts-loading">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>';
  try {
    const res = await fetch(API_URL + '?action=my_posts&user_id=' + uid);
    const data = await res.json();
    if (!data.posts || data.posts.length === 0) {
      list.innerHTML = '<div class="posts-empty"><div class="pe-icon">üì≠</div>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤</div>';
      return;
    }
    list.innerHTML = '';
    data.posts.forEach(p => list.appendChild(renderPost(p)));
  } catch(e) {
    list.innerHTML = '<div class="posts-empty"><div class="pe-icon">‚ö†Ô∏è</div>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>';
  }
}

function renderPost(p) {
  const card = document.createElement('div');
  card.className = 'my-post-card';
  const payload = p.payload || {};
  const sl = STATUS_LABELS[p.status] || {text: p.status, cls: 'pending'};
  const tl = TYPE_LABELS[p.type] || p.type;
  const date = new Date(p.created_at).toLocaleDateString('ru', {day:'2-digit',month:'2-digit',year:'numeric'});

  // –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Å—Ç–∞
  let desc = payload.description || payload.experience || payload.content || payload.title || '‚Äî';
  if (desc.length > 120) desc = desc.substring(0, 120) + '‚Ä¶';

  const isAccepted = p.status === 'accepted';
  const hasBoosted = p.boosted_until && new Date(p.boosted_until.endsWith("Z") ? p.boosted_until : p.boosted_until + "Z") > new Date();
  const boostLabel = hasBoosted ? '‚≠ê –ë—É—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω' : 'üöÄ –ü–æ–¥–Ω—è—Ç—å –≤ —Ç–æ–ø ¬∑ 25‚òÖ';

  card.innerHTML = `
    <div class="mpc-top">
      <span class="mpc-type">${tl}</span>
      <span class="mpc-status ${sl.cls}">${sl.text}</span>
    </div>
    <div class="mpc-desc">${desc}</div>
    <div class="mpc-date">üìÖ ${date}</div>
    ${isAccepted ? `<div class="mpc-boost">
      <div class="mpc-boost-btn ${hasBoosted ? 'active-boost' : ''}" onclick="boostPost(${p.id}, this)">${boostLabel}</div>
    </div>` : ''}
  `;
  return card;
}

async function boostPost(postId, btn) {
  if (btn.classList.contains('active-boost')) {
    toast('–ë—É—Å—Ç —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω', 'ok');
    return;
  }
  const uid = tg.initDataUnsafe?.user?.id || 0;
  btn.textContent = '‚Ä¶';
  btn.style.opacity = '0.5';
  try {
    const res = await fetch(API_URL, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({type: 'boost_post', post_id: postId, user_id: uid, boost: 'bump'})
    });
    const data = await res.json();
    btn.textContent = 'üöÄ –ü–æ–¥–Ω—è—Ç—å –≤ —Ç–æ–ø ¬∑ 25‚òÖ';
    btn.style.opacity = '1';
    if (data.status === 'ok') {
      toast('–°—á—ë—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –±–æ—Ç ‚úÖ', 'ok');
    } else {
      toast(data.message || '–û—à–∏–±–∫–∞', 'err');
    }
  } catch(e) {
    btn.textContent = 'üöÄ –ü–æ–¥–Ω—è—Ç—å –≤ —Ç–æ–ø ¬∑ 25‚òÖ';
    btn.style.opacity = '1';
    toast('–û—à–∏–±–∫–∞: ' + e.message);
  }
}

const canvas=document.getElementById('pc');const ctx=canvas.getContext('2d');
function rs(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;}rs();window.addEventListener('resize',rs);
class P{constructor(){this.x=Math.random()*canvas.width;this.y=Math.random()*canvas.height;this.s=Math.random()*1.6+0.4;this.vx=Math.random()*.45-.22;this.vy=Math.random()*.45-.22;this.o=Math.random()*.45+0.15;}update(){this.x+=this.vx;this.y+=this.vy;if(this.x>canvas.width)this.x=0;if(this.x<0)this.x=canvas.width;if(this.y>canvas.height)this.y=0;if(this.y<0)this.y=canvas.height;}draw(){ctx.fillStyle=`rgba(255,255,255,${this.o})`;ctx.beginPath();ctx.arc(this.x,this.y,this.s,0,Math.PI*2);ctx.fill();}}
const pts=[];for(let i=0;i<60;i++)pts.push(new P());
function anim(){ctx.clearRect(0,0,canvas.width,canvas.height);pts.forEach(p=>{p.update();p.draw();});pts.forEach((a,i)=>pts.slice(i+1).forEach(b=>{const dx=a.x-b.x,dy=a.y-b.y,d=Math.sqrt(dx*dx+dy*dy);if(d<100){ctx.strokeStyle=`rgba(255,255,255,${.08*(1-d/100)})`;ctx.lineWidth=.5;ctx.beginPath();ctx.moveTo(a.x,a.y);ctx.lineTo(b.x,b.y);ctx.stroke();}}));requestAnimationFrame(anim);}
anim();
</script>
